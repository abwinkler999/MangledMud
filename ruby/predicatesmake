# TinyMud Ruby Port Makefile
topdir = /usr/lib/ruby/1.8/i486-linux
VPATH = $(srcdir):$(topdir)
CC = gcc
CFLAGS   = -O -g -pipe -Wall -Wextra -Wwrite-strings
INCFLAGS = -I. -I$(topdir)
RM = rm -f
SRCS = dbwrap.c db.c player.c playerwrap.c stringutil.c predicates.c utils.c speech.c match.c predicateswrap.c
OBJS = dbwrap.o db.o player.o playerwrap.o stringutil.o predicates.o utils.o speech.o match.o predicateswrap.o
TARGET = predicates
DLLIB = $(TARGET).so

all: $(DLLIB)

clean:
	@-$(RM) $(OBJS)

.c.o:
	$(CC) $(INCFLAGS) $(CFLAGS) -c $<

$(DLLIB): $(OBJS) predicatesmake
	@-$(RM) $@
	$(CC) -shared -o $@ $(OBJS)

$(OBJS): ruby.h defines.h
