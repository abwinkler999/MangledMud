# TinyMud Ruby Port Makefile
topdir = /usr/lib/ruby/1.8/i486-linux
VPATH = $(srcdir):$(topdir)
CC = gcc
CFLAGS   = -O -g -pipe -Wall -Wextra -Wwrite-strings
INCFLAGS = -I. -I$(topdir)
RM = rm -f
SRCS = dbwrap.c db.c
OBJS = dbwrap.o db.o
TARGET = db
DLLIB = $(TARGET).so

all: $(DLLIB)

clean:
	@-$(RM) $(OBJS)

.c.o:
	$(CC) $(INCFLAGS) $(CFLAGS) -c $<

$(DLLIB): $(OBJS) dbmake
	@-$(RM) $@
	$(CC) -shared -o $@ $(OBJS)

$(OBJS): ruby.h defines.h
